SELECT Campus.Address, COUNT(Enrolment.StudentID) AS "No Of Students" FROM Campus LEFT JOIN Classroom ON Classroom.CaID = Campus.CaID LEFT JOIN SpaceAssign ON SpaceAssign.RmID = Classroom.RmID LEFT JOIN Teach ON Teach.SpaID = SpaceAssign.SpaID LEFT JOIN Module ON Module.ModuleID = Teach.ModuleID LEFT JOIN Enrolment ON Enrolment.ModuleID = Module.ModuleID GROUP BY (Campus.CaID);
SELECT Department.DeptName, COUNT(Enrolment.StudentID) AS "No Of Students" FROM Department LEFT JOIN Module ON Module.DeptID = Department.DeptID LEFT JOIN Enrolment ON Enrolment.ModuleID = Module.ModuleID GROUP BY (Department.DeptID) HAVING COUNT(Enrolment.StudentID) < 50;
SELECT Student.StudentName, Student.StudentID, Department.DeptName FROM `Enrolment` JOIN Module ON Enrolment.ModuleID = Module.ModuleID JOIN Student ON Student.StudentID = Enrolment.StudentID JOIN Department ON Department.DeptID = Module.DeptID WHERE Module.TMode = "Online";
INSERT INTO Campus (Address, GmName, Country, Status) VALUES ("122 Pineapple Ave, New York", "Michael Carlos", "USA", "Open soon");
SELECT StaffID, FirstName, LastName, Campus.Address, LeftD FROM `Staff` JOIN Campus ON Campus.CaID = Staff.CaID WHERE Staff.LeftD < '20200101' AND Staff.LeftD >= '20190101';
SELECT Classroom.RmID, Classroom.Capacity, Classroom.Location FROM `Classroom` JOIN SpaceAssign ON SpaceAssign.RmID = Classroom.RmID JOIN Teach ON Teach.TID = SpaceAssign.TID JOIN Enrolment ON Enrolment.ModuleID = Teach.ModuleID WHERE Classroom.CaID = 2 AND Enrolment.Year != '2018' GROUP BY Classroom.RmID;
SELECT Staff.StaffID, Staff.FirstName, Staff.LastName, Department.DeptName FROM `Staff` JOIN Department ON Department.DeptID = Staff.DeptID LEFT JOIN Allocation ON Staff.StaffID = Allocation.StaffID WHERE Allocation.StaffID IS NULL;
SELECT Staff.StaffID, Staff.Title, Staff.FirstName, Staff.LastName, Department.DeptName FROM `Staff` JOIN Department ON Department.DeptID = Staff.DeptID JOIN Module ON Module.DeptID = Staff.DeptID JOIN Enrolment ON Enrolment.ModuleID = Module.ModuleID WHERE Staff.LeftD > '20170101' AND Staff.Salary > (SELECT AVG(Staff.Salary) FROM `Staff`) AND Staff.ContractType = "Full time" AND Enrolment.Year != '2019' GROUP BY Staff.StaffID;
SELECT Activity.AcID, Activity.Title, Campus.Address, Budget.Amount, Activity.Status FROM `Activity` JOIN Campus ON Campus.CaID = Activity.CaID JOIN Allocation ON Allocation.AcID = Activity.AcID JOIN Staff ON Staff.StaffID = Allocation.StaffID JOIN Budget ON Budget.BuID = Activity.BuID JOIN Teach ON Teach.StaffID = Staff.StaffID WHERE Activity.Internal = 1 AND Teach.Year = 2019 AND Staff.CaID = 4 AND Teach.StaffID IN (select Teach.StaffID from `Teach` GROUP BY Teach.StaffID HAVING COUNT(Teach.StaffID)>1) AND Staff.StaffID > Staff.SupervisorID IN (select Staff.SupervisorID from `Staff` GROUP BY Staff.SupervisorID HAVING COUNT(Staff.SupervisorID)>1) GROUP BY (Activity.AcID);
SELECT Activity.Title, COUNT(Staff.StaffID) FROM `Activity` JOIN Budget ON Budget.BuID = Activity.BuID JOIN Allocation ON Allocation.AcID = Activity.AcID JOIN Staff ON Staff.StaffID = Allocation.StaffID WHERE Staff.Current = 1 AND Budget.Amount > 300 AND (Activity.Status = "Planning" OR Activity.Status = "On Going") GROUP BY (Activity.AcID);
SELECT Staff.StaffID, Staff.FirstName, Staff.LastName, Activity.Title, Budget.Amount, Activity.Status FROM `Staff` JOIN Allocation ON Allocation.StaffID = Staff.StaffID JOIN Activity ON Activity.AcID = Allocation.AcID JOIN Budget ON Budget.BuID = Activity.BuID WHERE Staff.CaID = 2 AND Staff.ContractType = "Full Time" AND Staff.Joined <= '20173112' AND Staff.LeftD >= '20170101';
SELECT Staff.StaffID, Staff.FirstName, Staff.LastName, COUNT(Classroom.RmID) AS "Classroom# Used" FROM `Campus` JOIN Classroom ON Classroom.CaID = Campus.CaID JOIN Staff ON Campus.CaID = Staff.CaID JOIN Teach ON Teach.StaffID = Staff.StaffID WHERE (Teach.Year = 2018 OR Teach.Year = 2019) AND Staff.Joined < 20200101 GROUP BY Staff.StaffID;
